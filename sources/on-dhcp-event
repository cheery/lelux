#!/bin/sh

# our DHCP client gives lot of other events, but this one
# we can use to configure our network devices.
if [ $1 == "bound" ]; then

    ip address flush dev $interface
    ip address add $ip/$mask broadcast + dev $interface
    ip route add default via $router

    # writing down the nameserver allows DNS requests to resolve correct.
    echo "# generated by $0 $*" > /etc/resolv.conf
    [ -n "$dns" ]       && echo "nameserver $dns"     >> /etc/resolv.conf
    [ -n "$broadcast" ] && echo "broadcast $broadcast" >> /etc/resolv.conf
    [ -n "$subnet" ]    && echo "netmask $subnet"      >> /etc/resolv.conf
fi
